<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Growsports LMS — Upgraded</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root { color-scheme: dark; }
    body { font-family: 'Inter', sans-serif; transition: background-color .3s ease,color .3s ease; }
    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,0.04); }
    .light .glass { background: rgba(0,0,0,0.03); }
    .elev { box-shadow: 0 10px 30px rgba(0,0,0,0.25); }
    .animate-fade { animation: fade .25s ease both; }
    @keyframes fade { from {opacity: 0; transform: translateY(6px)} to {opacity: 1; transform: translateY(0)} }
    .toast-enter { animation: toast-in .2s ease both; }
    @keyframes toast-in { from{transform: translateY(8px); opacity:0} to{transform: translateY(0); opacity:1} }
    .grid-autofill { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 1rem; }
    .hidden-el { display: none !important; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-[#0b0f1a] via-[#0a0a0a] to-black text-gray-100 dark">
  <!-- Sidebar -->
  <aside id="sidebar" class="fixed inset-y-0 left-0 w-72 max-w-[80vw] bg-[#0f1220]/90 glass border-r border-white/10 p-4 md:translate-x-0 -translate-x-full transition-transform duration-300 z-40">
    <div class="flex items-center gap-3 px-2 py-2">
      <svg class="h-9 w-9 text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.835 5.485 9.208 5 7.5 5S4.165 5.485 3 6.253v13C4.165 18.515 5.835 19 7.5 19s3.335-.485 4.5-1.247m0-13C13.165 5.485 14.835 5 16.5 5s3.335.485 4.5 1.247v13C19.835 18.515 18.165 19 16.5 19s-3.335-.485-4.5-1.247m0 0V5" />
      </svg>
      <div>
        <h1 class="text-xl font-bold">Growsports LMS</h1>
        <p class="text-xs text-gray-400">Learn. Track. Grow.</p>
      </div>
    </div>

    <nav class="mt-6 space-y-1">
      <button data-route="dashboard" class="navlink w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 focus:bg-white/10 transition">
        <span>🏠</span><span class="font-medium">Dashboard</span>
      </button>
      <button data-route="catalog" class="navlink w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 focus:bg-white/10 transition">
        <span>📚</span><span class="font-medium">Catalog</span>
      </button>
      <button data-route="media" class="navlink w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 focus:bg-white/10 transition">
        <span>🗂️</span><span class="font-medium">Media Library</span>
      </button>
      <button data-route="admin" class="navlink admin-only hidden-el w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 focus:bg-white/10 transition">
        <span>🛠️</span><span class="font-medium">Admin Panel</span>
      </button>
    </nav>

    <div class="mt-6 border-t border-white/10 pt-4 space-y-2 text-sm">
      <div id="userBlock" class="px-3">
        <div class="text-gray-300" id="userEmail">Guest</div>
        <div class="text-xs text-gray-500" id="userRole">Role: —</div>
        <div class="text-xs text-gray-500" id="userIdDisplay"></div>
      </div>
      <div class="flex gap-2 px-3">
        <button id="authButton" class="flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-2 rounded-lg text-sm transition">Log In</button>
        <button id="logoutButton" class="flex-1 bg-rose-600 hover:bg-rose-700 text-white px-3 py-2 rounded-lg text-sm transition hidden">Log Out</button>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="flex-1 md:ml-72">
    <header class="sticky top-0 z-30 glass elev border-b border-white/10">
      <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
        <div class="flex items-center gap-2">
          <button id="menuButton" class="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg hover:bg-white/10">☰</button>
          <div class="text-sm text-gray-400 hidden sm:block">
            <span id="breadcrumb">Dashboard</span>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <button id="themeToggle" class="w-10 h-10 rounded-lg hover:bg-white/10 flex items-center justify-center">🌙</button>
        </div>
      </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-6 space-y-8">
      <!-- Pages injected here -->
      <section id="page-dashboard" class="animate-fade">...</section>
      <section id="page-catalog" class="hidden animate-fade">...</section>
      <section id="page-media" class="hidden animate-fade">...</section>
      <section id="page-admin" class="hidden animate-fade">...</section>
    </main>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="fixed inset-0 bg-black/60 hidden items-center justify-center z-50">...</div>

  <!-- Toasts -->
  <div id="toasts" class="fixed bottom-4 right-4 space-y-2 z-[60]"></div>

  <!-- Firebase + App Logic -->
  <script type="module">
    // Firebase setup + UI logic from previous version (auth, courses, enrollments, media, admin)
  </script>
</body>
</html>
